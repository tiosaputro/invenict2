"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1902],{21902:(e,a,t)=>{t.r(a),t.d(a,{default:()=>H});var l=t(5166),r={class:"card"},o=(0,l.createElementVNode)("div",{class:"p-grid p-dir-col"},[(0,l.createElementVNode)("div",{class:"p-col"},[(0,l.createElementVNode)("h4",null,"Pembelian Peripheral(Detail)")])],-1),s={class:"card-body"},i={class:"p-fluid p-formgrid p-grid"},c={class:"p-field p-grid p-col"},d=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Kode Peripheral",-1),n={class:"p-col-3"},u={class:"p-fluid p-formgrid p-grid"},p={class:"p-field p-grid p-col"},m=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Jumlah (Qty)",-1),h={class:"p-col-3"},V={key:0,class:"p-error"},v={class:"p-fluid"},b={class:"p-field p-grid"},k=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Satuan",-1),g={class:"p-col-3"},f={key:0,class:"p-error"},N={class:"p-fluid"},y={class:"p-field p-grid"},_=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Harga Satuan",-1),E={class:"p-col-3"},C={key:0,class:"p-error"},B={class:"p-fluid"},S={class:"p-field p-grid"},D=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Total Harga",-1),x={class:"p-col-3"},U={key:1,class:"p-error"},w={class:"p-fluid"},z={class:"p-field p-grid"},T=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},"Keterangan",-1),$={class:"p-col-3"},I={key:0,class:"p-error"},A={class:"form-group"};const q={data:function(){return{locale:"id-ID",currency:"IDR",submitted:!1,errors:[],sat:[],kodeperi:[],detail:[],token:localStorage.getItem("token"),checkname:[],checkto:[],divisi:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.checkto=a.data.map((function(e){return e.to})),e.checkname=a.data.map((function(e){return e.name})),e.checkname.includes("Divisi")||e.checkto.includes("/divisi-refs")?(e.getValutaCode(),e.getDetail()):(e.$toast.add({severity:"error",summary:"403",detail:"Cannot Access This Page"}),setTimeout((function(){return e.$router.push("/dashboard")}),2e3))}))},getTotal:function(){this.detail.dpurchase_prc=this.detail.dpurchase_qty*this.detail.dpurchase_prc_sat},getDetail:function(){var e=this;this.axios.get("/api/edit-detail-pem/"+this.$route.params.purchase,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.detail=a.data,e.getKode(),e.getSatuan()})).catch((function(a){401==a.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},getKode:function(){var e=this;this.axios.get("/api/get-kode",{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.kodeperi=a.data}))},getSatuan:function(){var e=this;this.axios.get("/api/getSatuan",{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.sat=a.data}))},getValutaCode:function(){var e=this;this.axios.get("/api/getValuta/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.valuta=a.data,"$"==e.valuta.valuta_code&&(e.locale="en-US",e.currency="USD"),"Rp"==e.valuta.valuta_code&&(e.locale="id-ID",e.currency="IDR"),"Â¥"==e.valuta.valuta_code&&(e.locale="zh-CN",e.currency="CNY")}))},UpdateDetail:function(){var e=this;this.submitted=!0,null!=this.detail.dpurchase_qty&&null!=this.detail.dpurchase_sat&&null!=this.detail.dpurchase_prc_sat&&null!=this.detail.dpurchase_prc&&null!=this.detail.dpurchase_remark&&null!=this.detail.invent_code&&this.axios.put("/api/update-detail-pem/"+this.$route.params.code+"/"+this.$route.params.purchase,this.detail,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){setTimeout((function(){return e.$router.push("/pembelian-peripheral-detail/"+e.$route.params.code)}),1e3),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Update"})})).catch((function(a){e.errors=a.response.data.errors,e.submitted=!1}))}},render:function(e,a,t,q,H,K){var M=(0,l.resolveComponent)("Toast"),j=(0,l.resolveComponent)("Toolbar"),P=(0,l.resolveComponent)("Dropdown"),W=(0,l.resolveComponent)("InputNumber"),R=(0,l.resolveComponent)("Textarea"),J=(0,l.resolveComponent)("Button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createVNode)(M),(0,l.createElementVNode)("div",r,[(0,l.createVNode)(j,{class:"p-mb-4"},{left:(0,l.withCtx)((function(){return[o]})),_:1}),(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("form",{onSubmit:a[7]||(a[7]=(0,l.withModifiers)((function(){return K.UpdateDetail&&K.UpdateDetail.apply(K,arguments)}),["prevent"]))},[(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("div",c,[d,(0,l.createElementVNode)("div",n,[(0,l.createVNode)(P,{modelValue:H.detail.invent_code,"onUpdate:modelValue":a[0]||(a[0]=function(e){return H.detail.invent_code=e}),options:H.kodeperi,optionLabel:"name",optionValue:"code",disabled:""},null,8,["modelValue","options"])])])]),(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("div",p,[m,(0,l.createElementVNode)("div",h,[(0,l.createVNode)(W,{modelValue:H.detail.dpurchase_qty,"onUpdate:modelValue":a[1]||(a[1]=function(e){return H.detail.dpurchase_qty=e}),placeholder:"Masukan Jumlah (Qty)",change:K.getTotal(),class:(0,l.normalizeClass)({"p-invalid":H.submitted&&!H.detail.dpurchase_qty})},null,8,["modelValue","change","class"]),H.submitted&&!H.detail.dpurchase_qty?((0,l.openBlock)(),(0,l.createElementBlock)("small",V,"Jumlah (Qty) Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",b,[k,(0,l.createElementVNode)("div",g,[(0,l.createVNode)(P,{modelValue:H.detail.dpurchase_sat,"onUpdate:modelValue":a[2]||(a[2]=function(e){return H.detail.dpurchase_sat=e}),options:H.sat,showClear:!0,optionLabel:"name",optionValue:"code",placeholder:"Pilih Satuan",class:(0,l.normalizeClass)({"p-invalid":H.submitted&&!H.detail.dpurchase_sat})},null,8,["modelValue","options","class"]),H.submitted&&!H.detail.dpurchase_sat?((0,l.openBlock)(),(0,l.createElementBlock)("small",f,"Satuan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",N,[(0,l.createElementVNode)("div",y,[_,(0,l.createElementVNode)("div",E,[(0,l.createVNode)(W,{mode:"currency",locale:H.locale,currency:H.currency,change:K.getTotal(),modelValue:H.detail.dpurchase_prc_sat,"onUpdate:modelValue":a[3]||(a[3]=function(e){return H.detail.dpurchase_prc_sat=e}),placeholder:"Masukan Harga Satuan",class:(0,l.normalizeClass)({"p-invalid":H.submitted&&!H.detail.dpurchase_prc_sat})},null,8,["locale","currency","change","modelValue","class"]),H.submitted&&!H.detail.dpurchase_prc_sat?((0,l.openBlock)(),(0,l.createElementBlock)("small",C,"Harga Satuan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",B,[(0,l.createElementVNode)("div",S,[D,(0,l.createElementVNode)("div",x,[this.detail.dpurchase_prc_sat?((0,l.openBlock)(),(0,l.createBlock)(W,{key:0,mode:"currency",locale:H.locale,currency:H.currency,modelValue:H.detail.dpurchase_prc,"onUpdate:modelValue":a[4]||(a[4]=function(e){return H.detail.dpurchase_prc=e}),placeholder:"Masukan Total Harga",class:(0,l.normalizeClass)({"p-invalid":H.submitted&&!H.detail.dpurchase_prc}),readonly:""},null,8,["locale","currency","modelValue","class"])):(0,l.createCommentVNode)("",!0),H.submitted&&!H.detail.dpurchase_prc?((0,l.openBlock)(),(0,l.createElementBlock)("small",U,"Total Harga Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",w,[(0,l.createElementVNode)("div",z,[T,(0,l.createElementVNode)("div",$,[(0,l.createVNode)(R,{modelValue:H.detail.dpurchase_remark,"onUpdate:modelValue":a[5]||(a[5]=function(e){return H.detail.dpurchase_remark=e}),autoResize:!0,rows:"5",cols:"30",placeholder:"Masukan Keterangan",class:(0,l.normalizeClass)({"p-invalid":H.submitted&&!H.detail.dpurchase_remark})},null,8,["modelValue","class"]),H.submitted&&!H.detail.dpurchase_remark?((0,l.openBlock)(),(0,l.createElementBlock)("small",I,"Keterangan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",A,[(0,l.createVNode)(J,{class:"p-button-rounded p-button-primary p-mr-2 p-mb-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,l.createVNode)(J,{label:"Cancel",class:"p-button-rounded p-button-secondary p-mr-2 p-mb-2",icon:"pi pi-times",onClick:a[6]||(a[6]=function(a){return e.$router.go(-1)})})])],32)])])])}},H=q}}]);
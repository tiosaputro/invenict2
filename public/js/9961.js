"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9961],{29961:(e,a,t)=>{t.r(a),t.d(a,{default:()=>$});var l=t(70821),r={class:"col-12"},o={class:"card"},i=(0,l.createElementVNode)("h4",null,"Pembelian Peripheral(Detail)",-1),c={class:"card-body"},s={class:"field grid"},n=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Kode Peripheral",-1),d={class:"col-3"},u={class:"field grid"},p=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Jumlah (Qty)",-1),m={class:"col-3"},h={key:0,class:"p-error"},V={class:"field grid"},k=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Satuan",-1),v={class:"col-2"},g={key:0,class:"p-error"},f={class:"field grid"},y=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Harga Satuan",-1),N={class:"col-3"},_={key:0,class:"p-error"},b={class:"field grid"},E=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Total Harga",-1),C={class:"col-3"},B={key:0,class:"p-error"},S={class:"field grid"},D=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Keterangan",-1),x={class:"col-3"},U={key:0,class:"p-error"},w={class:"form-group"};const z={data:function(){return{locale:"id-ID",currency:"IDR",submitted:!1,errors:[],sat:[],kodeperi:[],detail:[],token:localStorage.getItem("token"),checkname:[],checkto:[],divisi:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.checkto=a.data.map((function(e){return e.to})),e.checkname=a.data.map((function(e){return e.name})),e.checkname.includes("Pembelian Peripheral")||e.checkto.includes("/pembelian-peripheral")?(e.getValutaCode(),e.getDetail()):e.$router.push("/access")}))},getTotal:function(){this.detail.dpurchase_prc=this.detail.dpurchase_qty*this.detail.dpurchase_prc_sat},getDetail:function(){var e=this;this.axios.get("/api/edit-detail-pem/"+this.$route.params.purchase,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.detail=a.data,e.getKode(),e.getSatuan()})).catch((function(a){401==a.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},getKode:function(){var e=this;this.axios.get("/api/get-kode",{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.kodeperi=a.data}))},getSatuan:function(){var e=this;this.axios.get("/api/getSatuan",{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.sat=a.data}))},getValutaCode:function(){var e=this;this.axios.get("/api/getValuta/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){e.valuta=a.data,"$"==e.valuta.valuta_code&&(e.locale="en-US",e.currency="USD"),"Rp"==e.valuta.valuta_code&&(e.locale="id-ID",e.currency="IDR"),"Â¥"==e.valuta.valuta_code&&(e.locale="zh-CN",e.currency="CNY")}))},UpdateDetail:function(){var e=this;this.submitted=!0,null!=this.detail.dpurchase_qty&&null!=this.detail.dpurchase_sat&&null!=this.detail.dpurchase_prc_sat&&null!=this.detail.dpurchase_prc&&null!=this.detail.dpurchase_remark&&null!=this.detail.invent_code&&this.axios.put("/api/update-detail-pem/"+this.$route.params.code+"/"+this.$route.params.purchase,this.detail,{headers:{Authorization:"Bearer "+this.token}}).then((function(a){setTimeout((function(){return e.$router.push("/pembelian-peripheral-detail/"+e.$route.params.code)}),1e3),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Update"})})).catch((function(a){e.errors=a.response.data.errors,e.submitted=!1}))}},render:function(e,a,t,z,$,T){var I=(0,l.resolveComponent)("Toast"),q=(0,l.resolveComponent)("Toolbar"),A=(0,l.resolveComponent)("Dropdown"),H=(0,l.resolveComponent)("InputNumber"),K=(0,l.resolveComponent)("Textarea"),M=(0,l.resolveComponent)("Button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createElementVNode)("div",r,[(0,l.createVNode)(I),(0,l.createElementVNode)("div",o,[(0,l.createVNode)(q,{class:"mb-4"},{start:(0,l.withCtx)((function(){return[i]})),_:1}),(0,l.createElementVNode)("div",c,[(0,l.createElementVNode)("form",{onSubmit:a[7]||(a[7]=(0,l.withModifiers)((function(){return T.UpdateDetail&&T.UpdateDetail.apply(T,arguments)}),["prevent"]))},[(0,l.createElementVNode)("div",s,[n,(0,l.createElementVNode)("div",d,[(0,l.createVNode)(A,{modelValue:$.detail.invent_code,"onUpdate:modelValue":a[0]||(a[0]=function(e){return $.detail.invent_code=e}),options:$.kodeperi,optionLabel:"name",optionValue:"code",disabled:""},null,8,["modelValue","options"])])]),(0,l.createElementVNode)("div",u,[p,(0,l.createElementVNode)("div",m,[(0,l.createVNode)(H,{modelValue:$.detail.dpurchase_qty,"onUpdate:modelValue":a[1]||(a[1]=function(e){return $.detail.dpurchase_qty=e}),placeholder:"Masukan Jumlah (Qty)",change:T.getTotal(),class:(0,l.normalizeClass)({"p-invalid":$.submitted&&!$.detail.dpurchase_qty})},null,8,["modelValue","change","class"]),$.submitted&&!$.detail.dpurchase_qty?((0,l.openBlock)(),(0,l.createElementBlock)("small",h,"Jumlah (Qty) Belum Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",V,[k,(0,l.createElementVNode)("div",v,[(0,l.createVNode)(A,{modelValue:$.detail.dpurchase_sat,"onUpdate:modelValue":a[2]||(a[2]=function(e){return $.detail.dpurchase_sat=e}),options:$.sat,showClear:!0,optionLabel:"name",optionValue:"code",placeholder:"Pilih Satuan",class:(0,l.normalizeClass)({"p-invalid":$.submitted&&!$.detail.dpurchase_sat})},null,8,["modelValue","options","class"]),$.submitted&&!$.detail.dpurchase_sat?((0,l.openBlock)(),(0,l.createElementBlock)("small",g,"Satuan Belum Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",f,[y,(0,l.createElementVNode)("div",N,[(0,l.createVNode)(H,{mode:"currency",locale:$.locale,currency:$.currency,change:T.getTotal(),modelValue:$.detail.dpurchase_prc_sat,"onUpdate:modelValue":a[3]||(a[3]=function(e){return $.detail.dpurchase_prc_sat=e}),placeholder:"Masukan Harga Satuan",class:(0,l.normalizeClass)({"p-invalid":$.submitted&&!$.detail.dpurchase_prc_sat})},null,8,["locale","currency","change","modelValue","class"]),$.submitted&&!$.detail.dpurchase_prc_sat?((0,l.openBlock)(),(0,l.createElementBlock)("small",_,"Harga Satuan Belum Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",b,[E,(0,l.createElementVNode)("div",C,[(0,l.createVNode)(H,{mode:"currency",locale:$.locale,currency:$.currency,modelValue:$.detail.dpurchase_prc,"onUpdate:modelValue":a[4]||(a[4]=function(e){return $.detail.dpurchase_prc=e}),placeholder:"Masukan Total Harga",class:(0,l.normalizeClass)({"p-invalid":$.submitted&&!$.detail.dpurchase_prc}),readonly:""},null,8,["locale","currency","modelValue","class"]),$.submitted&&!$.detail.dpurchase_prc?((0,l.openBlock)(),(0,l.createElementBlock)("small",B,"Total Harga Belum Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",S,[D,(0,l.createElementVNode)("div",x,[(0,l.createVNode)(K,{modelValue:$.detail.dpurchase_remark,"onUpdate:modelValue":a[5]||(a[5]=function(e){return $.detail.dpurchase_remark=e}),autoResize:!0,rows:"5",cols:"30",placeholder:"Masukan Keterangan",class:(0,l.normalizeClass)({"p-invalid":$.submitted&&!$.detail.dpurchase_remark})},null,8,["modelValue","class"]),$.submitted&&!$.detail.dpurchase_remark?((0,l.openBlock)(),(0,l.createElementBlock)("small",U,"Keterangan Belum Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",w,[(0,l.createVNode)(M,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,l.createVNode)(M,{label:"Cancel",class:"p-button-rounded p-button-secondary mr-2",icon:"pi pi-times",onClick:a[6]||(a[6]=function(a){return e.$router.go(-1)})})])],32)])])])])}},$=z}}]);
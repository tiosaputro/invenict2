"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6320],{26320:(e,r,t)=>{t.r(r),t.d(r,{default:()=>S});var l=t(70821),o={class:"card"},i=(0,l.createElementVNode)("h4",null,"ICT Request",-1),s={class:"card-body"},n=(0,l.createElementVNode)("div",{class:"field grid"},[(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"No. Request")],-1),a={class:"field grid"},d=(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"Priority Level",-1),c={class:"col-fixed w-9rem"},u={key:0,class:"p-error"},m={class:"field grid"},p=(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"Requestor",-1),v={class:"col-fixed w-9rem"},h={class:"field grid"},V=(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"User",-1),f={class:"col-fixed w-9rem"},b={key:0,class:"p-error"},N={class:"field grid"},g=(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"User Business Unit",-1),k={class:"col-fixed w-9rem"},E={key:0,class:"p-error"},C={class:"field grid"},_=(0,l.createElementVNode)("label",{class:"col-fixed w-9rem"},"User Division",-1),y={class:"col-fixed w-9rem"},w={key:0,class:"p-error"},x={class:"form-group"};const B={data:function(){return{errors:[],level:[],error:[],tgl:new Date,tipereq:null,priolev:null,usr_name:null,usr_divisi:null,requestor:localStorage.getItem("usr_name"),ket:null,divisi:[],bisnis:null,type:[],bu:[],mask:{input:"DD MMM YYYY"},token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id"),code:null}},watch:{},mounted:function(){this.getType()},methods:{getDivision:function(){var e=this;this.axios.get("api/get-division-user/"+this.bisnis,{headers:{Authorization:"Bearer "+this.token}}).then((function(r){e.divisi=r.data}))},getType:function(){var e=this;this.axios.get("api/getAddReq",{headers:{Authorization:"Bearer "+this.token}}).then((function(r){e.type=r.data.ref,e.bu=r.data.bisnis,e.level=r.data.prio}))},CreateIct:function(){var e=this;if(this.errors=[],this.error=[],null!=this.priolev&&null!=this.usr_name&&null!=this.usr_divisi&&null!=this.bisnis){var r=new FormData;r.append("tgl",this.tgl),r.append("bisnis",this.bisnis),r.append("user_name",this.usr_name),r.append("user_divisi",this.usr_divisi),r.append("priolev",this.priolev),this.axios.post("api/add-ict",r,{headers:{Authorization:"Bearer "+this.token}}).then((function(r){e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Create"}),e.code=r.data.ireq_id,setTimeout((function(){return e.$router.push({name:"Add Ict Request Detail",params:{code:e.code}})}),1e3)})).catch((function(r){e.errors=r.response.data.errors}))}else null==this.priolev&&(this.error.priolev="Priority level not filled"),null==this.bisnis&&(this.error.bisnis="Business unit not filled"),null==this.usr_name&&(this.error.usr_name="User not filled"),null==this.usr_divisi&&(this.error.usr_divisi="User division not filled")}}};const S=(0,t(83744).Z)(B,[["render",function(e,r,t,B,S,D){var U=(0,l.resolveComponent)("Toast"),q=(0,l.resolveComponent)("Toolbar"),I=(0,l.resolveComponent)("Dropdown"),z=(0,l.resolveComponent)("InputText"),T=(0,l.resolveComponent)("Button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createVNode)(U),(0,l.createElementVNode)("div",o,[(0,l.createVNode)(q,{class:"mb-4"},{start:(0,l.withCtx)((function(){return[i]})),_:1}),(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("form",{onSubmit:r[7]||(r[7]=(0,l.withModifiers)((function(){return D.CreateIct&&D.CreateIct.apply(D,arguments)}),["prevent"]))},[n,(0,l.createElementVNode)("div",a,[d,(0,l.createElementVNode)("div",c,[(0,l.createVNode)(I,{modelValue:S.priolev,"onUpdate:modelValue":r[0]||(r[0]=function(e){return S.priolev=e}),options:S.level,optionLabel:"name",optionValue:"code",placeholder:"Select One",showClear:!0,filter:!0,class:(0,l.normalizeClass)({"p-invalid":S.error.priolev})},null,8,["modelValue","options","class"]),S.error.priolev?((0,l.openBlock)(),(0,l.createElementBlock)("small",u,(0,l.toDisplayString)(S.error.priolev),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",m,[p,(0,l.createElementVNode)("div",v,[(0,l.createVNode)(z,{type:"text",modelValue:S.requestor,"onUpdate:modelValue":r[1]||(r[1]=function(e){return S.requestor=e}),disabled:""},null,8,["modelValue"])])]),(0,l.createElementVNode)("div",h,[V,(0,l.createElementVNode)("div",f,[(0,l.createVNode)(z,{type:"text",modelValue:S.usr_name,"onUpdate:modelValue":r[2]||(r[2]=function(e){return S.usr_name=e}),placeholder:"Enter User",class:(0,l.normalizeClass)({"p-invalid":S.error.usr_name})},null,8,["modelValue","class"]),S.error.usr_name?((0,l.openBlock)(),(0,l.createElementBlock)("small",b,(0,l.toDisplayString)(S.error.usr_name),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",N,[g,(0,l.createElementVNode)("div",k,[(0,l.createVNode)(I,{modelValue:S.bisnis,"onUpdate:modelValue":r[3]||(r[3]=function(e){return S.bisnis=e}),options:S.bu,optionLabel:"name",optionValue:"code",class:(0,l.normalizeClass)({"p-invalid":S.error.bisnis}),placeholder:"Select One",onChange:r[4]||(r[4]=function(e){return D.getDivision()}),filter:!0,showClear:!0},null,8,["modelValue","options","class"]),S.error.bisnis?((0,l.openBlock)(),(0,l.createElementBlock)("small",E,(0,l.toDisplayString)(S.error.bisnis),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",C,[_,(0,l.createElementVNode)("div",y,[(0,l.createVNode)(I,{modelValue:S.usr_divisi,"onUpdate:modelValue":r[5]||(r[5]=function(e){return S.usr_divisi=e}),options:S.divisi,optionLabel:"name",optionValue:"code",class:(0,l.normalizeClass)({"p-invalid":S.error.usr_divisi}),placeholder:"Select One",filter:!0,showClear:!0},null,8,["modelValue","options","class"]),S.error.usr_divisi?((0,l.openBlock)(),(0,l.createElementBlock)("small",w,(0,l.toDisplayString)(S.error.usr_divisi),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",x,[(0,l.createVNode)(T,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Save",type:"submit"}),(0,l.createVNode)(T,{label:"Cancel",class:"p-button-rounded p-button-secondary mt-2",icon:"pi pi-times",onClick:r[6]||(r[6]=function(r){return e.$router.push("/ict-request")})})])],32)])])])}]])}}]);
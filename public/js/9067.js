"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9067],{79067:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var l=a(5166),o={class:"col-12"},r={class:"card"},n=(0,l.createElementVNode)("h4",null,"Pembelian Peripheral(Detail)",-1),s={class:"card-body"},i={class:"field grid"},c=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Kode Peripheral",-1),d={class:"col-12 md:col-2"},u={key:0,class:"p-error"},m={key:1,class:"p-error"},p={class:"field grid"},h=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Jumlah (Qty)",-1),k={class:"col-3"},V={key:0,class:"p-error"},g={class:"field grid"},v=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Satuan",-1),y={class:"col-2"},b={key:0,class:"p-error"},N={class:"field grid"},f=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Harga Satuan",-1),E={class:"col-3"},C={key:0,class:"p-error"},B={class:"field grid"},S=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Total Harga",-1),D={class:"col-3"},w={key:0,class:"p-error"},x={class:"field grid"},z=(0,l.createElementVNode)("label",{style:{width:"155px"}},"Keterangan",-1),T={class:"col-3"},$={key:0,class:"p-error"},q={class:"form-group"};const U={data:function(){return{locale:"id-ID",currency:"IDR",submitted:!1,errors:[],kode:null,satuan:null,ket:null,pricetotal:null,qty:null,hrgsatuan:null,sat:[],kodeperi:[],valuta:[],token:localStorage.getItem("token"),checkname:[],checkto:[],divisi:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.id?this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("Pembelian Peripheral")||e.checkto.includes("/pembelian-peripheral")?(e.getValutaCode(),e.getKode()):e.$router.push("/access")})):this.$router.push("/login")},getKode:function(){var e=this;this.axios.get("/api/get-kode",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.kodeperi=t.data,e.getSatuan()})).catch((function(t){401==t.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},getSatuan:function(){var e=this;this.axios.get("/api/getSatuan",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.sat=t.data}))},getValutaCode:function(){var e=this;this.axios.get("/api/getValuta/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.valuta=t.data,"$"==e.valuta.valuta_code&&(e.locale="en-US",e.currency="USD"),"Rp"==e.valuta.valuta_code&&(e.locale="id-ID",e.currency="IDR"),"Â¥"==e.valuta.valuta_code&&(e.locale="zh-CN",e.currency="CNY")}))},getTotal:function(){this.qty&&this.hrgsatuan&&(this.pricetotal=this.qty*this.hrgsatuan)},CreateDetail:function(){var e=this;if(this.submitted=!0,this.errors=[],null!=this.kode&&null!=this.satuan&&null!=this.ket&&null!=this.pricetotal&&null!=this.hrgsatuan&&null!=this.qty){var t=new FormData;t.append("invent_code",this.kode),t.append("satuan",this.satuan),t.append("ket",this.ket),t.append("pricetotal",this.pricetotal),t.append("hrgsatuan",this.hrgsatuan),t.append("qty",this.qty),this.axios.post("/api/add-detail-pem/"+this.$route.params.code,t,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){setTimeout((function(){return e.$router.push("/pembelian-peripheral-detail/"+e.$route.params.code)}),1e3),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Create"})})).catch((function(t){e.errors=t.response.data.errors,e.submitted=!1}))}}},render:function(e,t,a,U,P,I){var K=(0,l.resolveComponent)("Toast"),_=(0,l.resolveComponent)("Toolbar"),j=(0,l.resolveComponent)("Dropdown"),M=(0,l.resolveComponent)("InputNumber"),W=(0,l.resolveComponent)("Textarea"),A=(0,l.resolveComponent)("Button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createElementVNode)("div",o,[(0,l.createVNode)(K),(0,l.createElementVNode)("div",r,[(0,l.createVNode)(_,{class:"mb-4"},{start:(0,l.withCtx)((function(){return[n]})),_:1}),(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("form",{onSubmit:t[7]||(t[7]=(0,l.withModifiers)((function(){return I.CreateDetail&&I.CreateDetail.apply(I,arguments)}),["prevent"]))},[(0,l.createElementVNode)("div",i,[c,(0,l.createElementVNode)("div",d,[(0,l.createVNode)(j,{modelValue:P.kode,"onUpdate:modelValue":t[0]||(t[0]=function(e){return P.kode=e}),options:P.kodeperi,optionLabel:"name",optionValue:"code",showClear:!0,filter:!0,placeholder:"Pilih Kode",class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.kode})},null,8,["modelValue","options","class"]),P.submitted&&!P.kode?((0,l.openBlock)(),(0,l.createElementBlock)("small",u,"Kode Peripheral Wajib Diisi. ")):(0,l.createCommentVNode)("",!0),P.errors.invent_code?((0,l.openBlock)(),(0,l.createElementBlock)("small",m,(0,l.toDisplayString)(P.errors.invent_code[0]),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",p,[h,(0,l.createElementVNode)("div",k,[(0,l.createVNode)(M,{modelValue:P.qty,"onUpdate:modelValue":t[1]||(t[1]=function(e){return P.qty=e}),placeholder:"Masukan Jumlah (Qty)",change:I.getTotal(),class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.qty})},null,8,["modelValue","change","class"]),P.submitted&&!P.qty?((0,l.openBlock)(),(0,l.createElementBlock)("small",V,"Jumlah (Qty) Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",g,[v,(0,l.createElementVNode)("div",y,[(0,l.createVNode)(j,{modelValue:P.satuan,"onUpdate:modelValue":t[2]||(t[2]=function(e){return P.satuan=e}),options:P.sat,showClear:!0,optionLabel:"name",optionValue:"code",placeholder:"Pilih Satuan",class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.satuan})},null,8,["modelValue","options","class"]),P.submitted&&!P.satuan?((0,l.openBlock)(),(0,l.createElementBlock)("small",b,"Satuan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",N,[f,(0,l.createElementVNode)("div",E,[(0,l.createVNode)(M,{mode:"currency",change:I.getTotal(),locale:P.locale,currency:P.currency,modelValue:P.hrgsatuan,"onUpdate:modelValue":t[3]||(t[3]=function(e){return P.hrgsatuan=e}),placeholder:"Masukan Harga Satuan",class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.hrgsatuan})},null,8,["change","locale","currency","modelValue","class"]),P.submitted&&!P.hrgsatuan?((0,l.openBlock)(),(0,l.createElementBlock)("small",C,"Harga Satuan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",B,[S,(0,l.createElementVNode)("div",D,[(0,l.createVNode)(M,{mode:"currency",currency:P.currency,locale:P.locale,modelValue:P.pricetotal,"onUpdate:modelValue":t[4]||(t[4]=function(e){return P.pricetotal=e}),placeholder:"Masukan Total Pembayaran",class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.pricetotal}),readonly:""},null,8,["currency","locale","modelValue","class"]),P.submitted&&!P.pricetotal?((0,l.openBlock)(),(0,l.createElementBlock)("small",w,"Total Harga Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",x,[z,(0,l.createElementVNode)("div",T,[(0,l.createVNode)(W,{modelValue:P.ket,"onUpdate:modelValue":t[5]||(t[5]=function(e){return P.ket=e}),autoResize:!0,rows:"5",cols:"30",placeholder:"Masukan Keterangan",class:(0,l.normalizeClass)({"p-invalid":P.submitted&&!P.ket})},null,8,["modelValue","class"]),P.submitted&&!P.ket?((0,l.openBlock)(),(0,l.createElementBlock)("small",$,"Keterangan Wajib Diisi. ")):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",q,[(0,l.createVNode)(A,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,l.createVNode)(A,{label:"Cancel",class:"p-button-rounded p-button-secondary mr-2",icon:"pi pi-times",onClick:t[6]||(t[6]=function(t){return e.$router.go(-1)})})])],32)])])])])}},P=U}}]);
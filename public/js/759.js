"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[759],{50759:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R});var r=i(5166),s={class:"card"},o=(0,r.createElementVNode)("div",{class:"p-grid p-dir-col"},[(0,r.createElementVNode)("div",{class:"p-col"},[(0,r.createElementVNode)("h4",null,"ICT Request")])],-1),l={class:"card-body"},a=(0,r.createElementVNode)("div",{class:"p-fluid"},[(0,r.createElementVNode)("div",{class:"p-field p-grid"},[(0,r.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"No. Request")])],-1),n={class:"p-fluid"},c={class:"p-field p-grid"},d=(0,r.createElementVNode)("label",{for:"kode",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Tgl. Request",-1),p={class:"p-col-5"},u={class:"p-inputgroup"},m=["value","onClick"],h={key:0,class:"p-error"},v={class:"p-fluid"},V={class:"p-field p-grid"},g=(0,r.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Tipe Request",-1),b={class:"p-col-3"},k={key:0,class:"p-error"},f={class:"p-fluid"},N={class:"p-field p-grid"},E=(0,r.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Pengguna",-1),y={class:"p-col-3"},C={key:0,class:"p-error"},B={class:"p-fluid"},_={class:"p-field p-grid"},q=(0,r.createElementVNode)("label",{for:"Deskripsi",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Divisi Pengguna",-1),D={class:"p-col-3"},w={key:0,class:"p-error"},x={class:"p-fluid"},T={class:"p-field p-grid"},S=(0,r.createElementVNode)("label",{for:"Deskripsi",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Bisnis Unit",-1),U={class:"p-col-3"},P={key:0,class:"p-error"},z={class:"form-group"};const I={data:function(){return{errors:[],error:[],tgl:new Date,tipereq:null,usr_name:null,usr_divisi:null,divisi:[],bisnis:null,type:[],bu:[],mask:{input:"DD MMM YYYY"},token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id"),code:null}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.axios.get("api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("Request")||e.checkto.includes("/ict-request")?(e.getBisnis(),e.getDivisi()):(e.$toast.add({severity:"error",summary:"403",detail:"Cannot Access This Page"}),setTimeout((function(){return e.$router.push("/dashboard")}),2e3))}))},getDivisi:function(){var e=this;this.axios.get("api/get-divisi",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.divisi=t.data}))},getBisnis:function(){var e=this;this.axios.get("api/get-bisnis",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.bu=t.data,e.getType()})).catch((function(t){401==t.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},getType:function(){var e=this;this.axios.get("api/getType",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.type=t.data}))},CreateIct:function(){var e=this;if(this.errors=[],this.error=[],null!=this.tipereq&&null!=this.bisnis&&null!=this.usr_name&&null!=this.usr_divisi){var t=new FormData;t.append("tgl",this.tgl),t.append("tipereq",this.tipereq),t.append("bisnis",this.bisnis),t.append("user_name",this.usr_name),t.append("user_divisi",this.usr_divisi),this.axios.post("api/add-ict",t,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Create"}),e.code=t.data.ireq_id,setTimeout((function(){return e.$router.push({name:"Add Ict Request Detail",params:{code:e.code}})}),1e3)})).catch((function(t){e.errors=t.response.data.errors}))}else null==this.tipereq&&(this.error.tipereq="Tipe Request Wajib Diisi"),null==this.bisnis&&(this.error.bisnis="Bisnis Unit Wajib Diisi"),null==this.usr_name&&(this.error.usr_name="Pengguna Wajib Diisi"),null==this.usr_divisi&&(this.error.usr_divisi="Divisi Pengguna Wajib Diisi")}},render:function(e,t,i,I,R,A){var $=(0,r.resolveComponent)("Toast"),M=(0,r.resolveComponent)("Toolbar"),j=(0,r.resolveComponent)("Button"),L=(0,r.resolveComponent)("DatePicker"),W=(0,r.resolveComponent)("Dropdown"),Y=(0,r.resolveComponent)("InputText");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)($),(0,r.createElementVNode)("div",s,[(0,r.createVNode)(M,{class:"p-mb-4"},{left:(0,r.withCtx)((function(){return[o]})),_:1}),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("form",{onSubmit:t[7]||(t[7]=(0,r.withModifiers)((function(){return A.CreateIct&&A.CreateIct.apply(A,arguments)}),["prevent"]))},[a,(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",c,[d,(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",u,[(0,r.createVNode)(L,{modelValue:R.tgl,"onUpdate:modelValue":t[1]||(t[1]=function(e){return R.tgl=e}),masks:R.mask},{default:(0,r.withCtx)((function(e){var i=e.inputValue,s=e.togglePopover;return[(0,r.createElementVNode)("input",{class:"bg-white text-gray-900 w-full py-2 px-3 appearance-none border rounded-l focus:outline-none",value:i,onClick:s,placeholder:"Pilih Tgl. Request",readonly:""},null,8,m),R.tgl?((0,r.openBlock)(),(0,r.createBlock)(j,{key:1,icon:"pi pi-trash",class:"p-button-danger",onClick:t[0]||(t[0]=function(e){return R.tgl=""})})):((0,r.openBlock)(),(0,r.createBlock)(j,{key:0,icon:"pi pi-calendar",onClick:s},null,8,["onClick"]))]})),_:1},8,["modelValue","masks"])]),R.errors.tgl?((0,r.openBlock)(),(0,r.createElementBlock)("small",h,(0,r.toDisplayString)(R.errors.tgl[0]),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",v,[(0,r.createElementVNode)("div",V,[g,(0,r.createElementVNode)("div",b,[(0,r.createVNode)(W,{modelValue:R.tipereq,"onUpdate:modelValue":t[2]||(t[2]=function(e){return R.tipereq=e}),options:R.type,optionLabel:"name",optionValue:"code",placeholder:"Pilih Tipe Request",showClear:!0,class:(0,r.normalizeClass)({"p-invalid":R.error.tipereq})},null,8,["modelValue","options","class"]),R.error.tipereq?((0,r.openBlock)(),(0,r.createElementBlock)("small",k,(0,r.toDisplayString)(R.error.tipereq),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("div",N,[E,(0,r.createElementVNode)("div",y,[(0,r.createVNode)(Y,{type:"text",modelValue:R.usr_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return R.usr_name=e}),placeholder:"Masukan User",class:(0,r.normalizeClass)({"p-invalid":R.error.usr_name})},null,8,["modelValue","class"]),R.error.usr_name?((0,r.openBlock)(),(0,r.createElementBlock)("small",C,(0,r.toDisplayString)(R.error.bisnis),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("div",_,[q,(0,r.createElementVNode)("div",D,[(0,r.createVNode)(W,{modelValue:R.usr_divisi,"onUpdate:modelValue":t[4]||(t[4]=function(e){return R.usr_divisi=e}),options:R.divisi,optionLabel:"name",optionValue:"code",placeholder:"Pilih Divisi User",showClear:!0,filter:!0,class:(0,r.normalizeClass)({"p-invalid":R.error.usr_divisi})},null,8,["modelValue","options","class"]),R.error.usr_divisi?((0,r.openBlock)(),(0,r.createElementBlock)("small",w,(0,r.toDisplayString)(R.error.usr_divisi),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",x,[(0,r.createElementVNode)("div",T,[S,(0,r.createElementVNode)("div",U,[(0,r.createVNode)(W,{modelValue:R.bisnis,"onUpdate:modelValue":t[5]||(t[5]=function(e){return R.bisnis=e}),options:R.bu,optionLabel:"name",optionValue:"code",placeholder:"Pilih Bisnis Unit",showClear:!0,filter:!0,class:(0,r.normalizeClass)({"p-invalid":R.error.bisnis})},null,8,["modelValue","options","class"]),R.error.bisnis?((0,r.openBlock)(),(0,r.createElementBlock)("small",P,(0,r.toDisplayString)(R.error.bisnis),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",z,[(0,r.createVNode)(j,{class:"p-button-rounded p-button-primary p-mr-2 p-mb-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,r.createVNode)(j,{label:"Cancel",class:"p-button-rounded p-button-secondary p-mr-2 p-mb-2",icon:"pi pi-times",onClick:t[6]||(t[6]=function(t){return e.$router.push("/ict-request")})})])],32)])])])}},R=I}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[253],{37381:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(23645),r=a.n(l)()((function(e){return e[1]}));r.push([e.id,".user-image[data-v-25b08794]{box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);height:227pt}@media screen and (max-width:640px){.p-multiselect[data-v-25b08794]{width:100%}}",""]);const o=r},50253:(e,t,a)=>{a.r(t),a.d(t,{default:()=>fe});var l=a(5166);(0,l.pushScopeId)("data-v-25b08794");var r={class:"card"},o=(0,l.createElementVNode)("div",{class:"p-grid p-dir-col"},[(0,l.createElementVNode)("div",{class:"p-col"},[(0,l.createElementVNode)("h4",null,"Management User")])],-1),s={class:"row"},d={class:"col-sm-6"},i={class:"card-body"},n={class:"p-fluid"},c={class:"p-field p-grid"},m=(0,l.createElementVNode)("label",{for:"tipe",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"User ID",-1),p={class:"p-col-3 p-md-6"},u={class:"p-fluid"},h={class:"p-field p-grid"},V=(0,l.createElementVNode)("label",{for:"kode",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Username",-1),f={class:"p-col-3 p-md-6"},v={class:"p-fluid"},N={class:"p-field p-grid"},g=(0,l.createElementVNode)("label",{for:"tipe",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Full Name",-1),E={class:"p-col-3 p-md-6"},b={key:0,class:"p-error"},k={class:"p-fluid"},y={class:"p-field p-grid"},w=(0,l.createElementVNode)("label",{for:"kode",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Email",-1),_={class:"p-col-3 p-md-6"},x={key:0,class:"p-error"},C={class:"p-fluid"},B={class:"p-field p-grid"},U=(0,l.createElementVNode)("label",{for:"kode",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Password",-1),S={class:"p-col-3 p-md-6"},I={class:"p-fluid"},z={class:"p-field p-grid"},A=(0,l.createElementVNode)("label",{for:"Deskripsi",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Alamat",-1),D={class:"p-col-3 p-md-6"},R={key:0,class:"p-error"},$={class:"p-fluid"},T={class:"p-field p-grid"},M=(0,l.createElementVNode)("label",{for:"Status",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Divisi",-1),L={class:"p-col-3 p-md-6"},F={key:0,class:"p-error"},P={class:"p-fluid"},Z={class:"p-field p-grid"},O=(0,l.createElementVNode)("label",{for:"Status",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Status",-1),j={class:"p-col-3 p-md-6"},K={key:0,class:"p-error"},q={class:"card",style:{width:"33rem"}},G={class:"p-fluid"},H={class:"p-field p-grid"},J=(0,l.createElementVNode)("label",{for:"Status",class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"120px"}},"Roles",-1),Q={class:"p-col-3 p-md-6"},W={key:0,class:"p-error"},X={class:"form-group"},Y={class:"col-sm-6"},ee={class:"p-fluid"},te={class:"p-field p-grid"},ae=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},null,-1),le={class:"p-col-10 p-md-6"},re={class:"card",style:{height:"23.5rem"}},oe=["src"],se=["src"],de={class:"p-fluid"},ie={class:"p-field p-grid"},ne=(0,l.createElementVNode)("label",{class:"p-col-12 p-mb-2 p-md-2 p-mb-md-0",style:{width:"155px"}},null,-1),ce={class:"p-col-10 p-md-6"};(0,l.popScopeId)();const me={data:function(){return{errors:[],preview:"",user:[],role:{role:null},foto:"",stat:[{nama:"Aktif",code:"T"},{nama:"Tidak Aktif",code:"F"}],token:localStorage.getItem("token"),roles:[],divisi:[],checkname:[],checkto:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("User")||e.checkto.includes("/mng-user")?(e.getUser(),e.getRole(),e.getRoles(),e.getDivisi()):(e.$toast.add({severity:"error",summary:"403",detail:"Cannot Access This Page"}),setTimeout((function(){return e.$router.push("/dashboard")}),2e3))}))},getRole:function(){var e=this;this.axios.get("/api/edit-usr-role/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.role.role=t.data}))},getDivisi:function(){var e=this;this.axios.get("/api/get-divisi",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.divisi=t.data}))},getUser:function(){var e=this;this.axios.get("/api/edit-user/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.user=t.data}))},getRoles:function(){var e=this;this.axios.get("/api/get-role",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.roles=t.data})).catch((function(t){401==t.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},fileImage:function(e){this.foto=e.target.files[0],this.displayImage=!0,this.preview=URL.createObjectURL(e.target.files[0]),this.createImage(this.foto)},createImage:function(e){new Image;var t=new FileReader,a=this.user;t.onload=function(e){a.image=e.target.result},t.readAsDataURL(e)},UpdateUser:function(){var e=this;this.errors=[],this.axios.put("/api/update-user/"+this.$route.params.code,this.user,{headers:{Authorization:"Bearer "+this.token}}).then((function(){e.axios.put("/api/update-usr-role/"+e.$route.params.code,e.role,{headers:{Authorization:"Bearer "+e.token}}),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Update"}),setTimeout((function(){return e.$router.push("/mng-user")}),1e3)})).catch((function(t){e.errors=t.response.data.errors}))}}};var pe=a(93379),ue=a.n(pe),he=a(37381),Ve={insert:"head",singleton:!1};ue()(he.Z,Ve);he.Z.locals;me.render=function(e,t,a,me,pe,ue){var he=(0,l.resolveComponent)("Toast"),Ve=(0,l.resolveComponent)("Toolbar"),fe=(0,l.resolveComponent)("InputText"),ve=(0,l.resolveComponent)("Password"),Ne=(0,l.resolveComponent)("Textarea"),ge=(0,l.resolveComponent)("Dropdown"),Ee=(0,l.resolveComponent)("MultiSelect"),be=(0,l.resolveComponent)("Button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createVNode)(he),(0,l.createElementVNode)("div",r,[(0,l.createVNode)(Ve,{class:"p-mb-4"},{left:(0,l.withCtx)((function(){return[o]})),_:1}),(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("div",d,[(0,l.createElementVNode)("form",{onSubmit:t[10]||(t[10]=(0,l.withModifiers)((function(){return ue.UpdateUser&&ue.UpdateUser.apply(ue,arguments)}),["prevent"]))},[(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("div",c,[m,(0,l.createElementVNode)("div",p,[(0,l.createVNode)(fe,{modelValue:pe.user.usr_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return pe.user.usr_id=e}),disabled:""},null,8,["modelValue"])])])]),(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("div",h,[V,(0,l.createElementVNode)("div",f,[(0,l.createVNode)(fe,{modelValue:pe.user.usr_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return pe.user.usr_name=e}),disabled:""},null,8,["modelValue"])])])]),(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",N,[g,(0,l.createElementVNode)("div",E,[(0,l.createVNode)(fe,{type:"text",modelValue:pe.user.usr_fullname,"onUpdate:modelValue":t[2]||(t[2]=function(e){return pe.user.usr_fullname=e}),placeholder:"Masukan Full Name",class:(0,l.normalizeClass)({"p-invalid":pe.errors.usr_fullname}),autofocus:""},null,8,["modelValue","class"]),pe.errors.usr_fullname?((0,l.openBlock)(),(0,l.createElementBlock)("small",b,(0,l.toDisplayString)(pe.errors.usr_fullname[0]),1)):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",k,[(0,l.createElementVNode)("div",y,[w,(0,l.createElementVNode)("div",_,[(0,l.createVNode)(fe,{type:"email",modelValue:pe.user.usr_email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return pe.user.usr_email=e}),placeholder:"Masukan Email",class:(0,l.normalizeClass)({"p-invalid":pe.errors.usr_email})},null,8,["modelValue","class"]),pe.errors.usr_email?((0,l.openBlock)(),(0,l.createElementBlock)("small",x,(0,l.toDisplayString)(pe.errors.usr_email[0]),1)):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",C,[(0,l.createElementVNode)("div",B,[U,(0,l.createElementVNode)("div",S,[(0,l.createVNode)(ve,{modelValue:pe.user.usr_password,"onUpdate:modelValue":t[4]||(t[4]=function(e){return pe.user.usr_password=e}),placeholder:"Password Baru(Optional)",toggleMask:"",feedback:!1},null,8,["modelValue"])])])]),(0,l.createElementVNode)("div",I,[(0,l.createElementVNode)("div",z,[A,(0,l.createElementVNode)("div",D,[(0,l.createVNode)(Ne,{modelValue:pe.user.usr_alamat,"onUpdate:modelValue":t[5]||(t[5]=function(e){return pe.user.usr_alamat=e}),autoResize:!0,rows:"5",cols:"30",placeholder:"Masukan Keterangan . . .",class:(0,l.normalizeClass)({"p-invalid":pe.errors.usr_alamat})},null,8,["modelValue","class"]),pe.errors.usr_alamat?((0,l.openBlock)(),(0,l.createElementBlock)("small",R,(0,l.toDisplayString)(pe.errors.usr_alamat[0]),1)):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",$,[(0,l.createElementVNode)("div",T,[M,(0,l.createElementVNode)("div",L,[(0,l.createVNode)(ge,{modelValue:pe.user.div_id,"onUpdate:modelValue":t[6]||(t[6]=function(e){return pe.user.div_id=e}),options:pe.divisi,showClear:!0,filter:!0,optionLabel:"name",optionValue:"code",placeholder:"Select A Divisi",class:(0,l.normalizeClass)({"p-invalid":pe.errors.div_id})},null,8,["modelValue","options","class"]),pe.errors.div?((0,l.openBlock)(),(0,l.createElementBlock)("small",F,(0,l.toDisplayString)(pe.errors.div_id[0]),1)):(0,l.createCommentVNode)("",!0)])])]),(0,l.createElementVNode)("div",P,[(0,l.createElementVNode)("div",Z,[O,(0,l.createElementVNode)("div",j,[(0,l.createVNode)(ge,{modelValue:pe.user.usr_stat,"onUpdate:modelValue":t[7]||(t[7]=function(e){return pe.user.usr_stat=e}),options:pe.stat,showClear:!0,filter:!0,optionLabel:"nama",optionValue:"code",placeholder:"Select A Status",class:(0,l.normalizeClass)({"p-invalid":pe.errors.usr_stat})},null,8,["modelValue","options","class"]),pe.errors.usr_stat?((0,l.openBlock)(),(0,l.createElementBlock)("small",K,(0,l.toDisplayString)(pe.errors.usr_stat[0]),1)):(0,l.createCommentVNode)("",!0)])])])]),(0,l.createElementVNode)("div",q,[(0,l.createElementVNode)("div",G,[(0,l.createElementVNode)("div",H,[J,(0,l.createElementVNode)("div",Q,[(0,l.createVNode)(Ee,{modelValue:pe.role.role,"onUpdate:modelValue":t[8]||(t[8]=function(e){return pe.role.role=e}),options:pe.roles,optionValue:"code",optionLabel:"name",display:"chip",placeholder:"Select Roles",class:(0,l.normalizeClass)({"p-invalid":pe.errors.role})},null,8,["modelValue","options","class"]),pe.errors.role?((0,l.openBlock)(),(0,l.createElementBlock)("small",W,(0,l.toDisplayString)(pe.errors.role[0]),1)):(0,l.createCommentVNode)("",!0)])])])]),(0,l.createElementVNode)("div",X,[(0,l.createVNode)(be,{class:"p-button-rounded p-button-primary p-mr-2 p-mb-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,l.createVNode)(be,{label:"Cancel",class:"p-button-rounded p-button-secondary p-mr-2 p-mb-2",icon:"pi pi-times",onClick:t[9]||(t[9]=function(t){return e.$router.push("/mng-user")})})])],32)]),(0,l.createElementVNode)("div",Y,[(0,l.createElementVNode)("div",ee,[(0,l.createElementVNode)("div",te,[ae,(0,l.createElementVNode)("div",le,[(0,l.createElementVNode)("div",re,[pe.preview?((0,l.openBlock)(),(0,l.createElementBlock)("img",{key:0,src:pe.preview,class:"user-image"},null,8,oe)):((0,l.openBlock)(),(0,l.createElementBlock)("img",{key:1,src:"/profile/"+pe.user.usr_foto,class:"user-image"},null,8,se))])])])]),(0,l.createElementVNode)("div",de,[(0,l.createElementVNode)("div",ie,[ne,(0,l.createElementVNode)("div",ce,[(0,l.createVNode)(fe,{type:"file",name:"foto",ref:"fileInput",class:"form-control",onChange:ue.fileImage},null,8,["onChange"])])])])])])])])},me.__scopeId="data-v-25b08794";const fe=me}}]);
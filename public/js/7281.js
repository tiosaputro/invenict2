"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7281],{47281:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var i=r(70821),o={class:"card"},l=(0,i.createElementVNode)("h4",null,"ICT Request",-1),s={class:"card-body"},a={class:"field grid"},n=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"No. Request",-1),c={class:"col"},u={class:"field grid"},d=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Priority Level",-1),m={class:"col-fixed w-9rem"},p={key:0,class:"p-error"},h={class:"field grid"},v=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem"},"Requestor",-1),V={class:"col-fixed w-9rem"},f={class:"field grid"},_=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"User",-1),q={class:"col-fixed w-9rem"},N={key:0,class:"p-error"},b={class:"field grid"},k=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"User Division",-1),E={class:"col-fixed w-9rem"},y={key:0,class:"p-error"},g={class:"field grid"},x=(0,i.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Business Unit",-1),w={class:"col-fixed w-9rem"},C={key:0,class:"p-error"},B={key:1,class:"p-error"},S={class:"form-group"};const U={data:function(){return{level:[],errors:[],error:[],mutasi:[],type:[],divisi:[],bu:[],mask:{input:"DD MMM YYYY"},token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id"),requestor:localStorage.getItem("usr_name")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.id?this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("Request")||e.checkto.includes("/ict-request")?e.getIct():e.$router.push("/access")})):this.$router.push("/login")},getIct:function(){var e=this;this.axios.get("/api/edit-ict/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.mutasi=t.data.ict,e.divisi=t.data.divisi,e.type=t.data.ref,e.bu=t.data.bisnis,e.level=t.data.prio})).catch((function(t){401==t.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},UpdateIct:function(){var e=this;this.errors=[],this.error=[],""!=this.mutasi.ireq_date&&null!=this.mutasi.ireq_prio_level&&null!=this.mutasi.ireq_divisi_user&&null!=this.mutasi.ireq_bu&&null!=this.mutasi.ireq_user?this.axios.put("/api/update-ict/"+this.$route.params.code,this.mutasi,{headers:{Authorization:"Bearer "+this.token}}).then((function(){e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Update"}),setTimeout((function(){return e.$router.push("/ict-request")}),1e3)})).catch((function(t){e.errors=t.response.data.errors})):(null==this.mutasi.ireq_prio_level&&(this.error.ireq_prio_level="Priority level not filled"),null==this.mutasi.ireq_divisi_user&&(this.error.ireq_divisi_user="User division not filled"),null==this.mutasi.ireq_bu&&(this.error.ireq_bu="Business unit not filled"),null==this.mutasi.ireq_user&&(this.error.ireq_user="User not filled"))}}};const I=(0,r(83744).Z)(U,[["render",function(e,t,r,U,I,D){var $=(0,i.resolveComponent)("Toast"),z=(0,i.resolveComponent)("Toolbar"),T=(0,i.resolveComponent)("InputText"),L=(0,i.resolveComponent)("Dropdown"),M=(0,i.resolveComponent)("Button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)($),(0,i.createElementVNode)("div",o,[(0,i.createVNode)(z,{class:"mb-4"},{start:(0,i.withCtx)((function(){return[l]})),_:1}),(0,i.createElementVNode)("div",s,[(0,i.createElementVNode)("form",{onSubmit:t[7]||(t[7]=(0,i.withModifiers)((function(){return D.UpdateIct&&D.UpdateIct.apply(D,arguments)}),["prevent"]))},[(0,i.createElementVNode)("div",a,[n,(0,i.createElementVNode)("div",c,[(0,i.createVNode)(T,{type:"text",modelValue:I.mutasi.ireq_no,"onUpdate:modelValue":t[0]||(t[0]=function(e){return I.mutasi.ireq_no=e}),disabled:""},null,8,["modelValue"])])]),(0,i.createElementVNode)("div",u,[d,(0,i.createElementVNode)("div",m,[(0,i.createVNode)(L,{modelValue:I.mutasi.ireq_prio_level,"onUpdate:modelValue":t[1]||(t[1]=function(e){return I.mutasi.ireq_prio_level=e}),options:I.level,optionLabel:"name",optionValue:"code",placeholder:"Select One",showClear:!0,filter:!0,class:(0,i.normalizeClass)({"p-invalid":I.error.ireq_prio_level}),autofocus:""},null,8,["modelValue","options","class"]),I.error.ireq_prio_level?((0,i.openBlock)(),(0,i.createElementBlock)("small",p,(0,i.toDisplayString)(I.error.ireq_prio_level),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",h,[v,(0,i.createElementVNode)("div",V,[(0,i.createVNode)(T,{type:"text",modelValue:I.requestor,"onUpdate:modelValue":t[2]||(t[2]=function(e){return I.requestor=e}),disabled:""},null,8,["modelValue"])])]),(0,i.createElementVNode)("div",f,[_,(0,i.createElementVNode)("div",q,[(0,i.createVNode)(T,{type:"text",modelValue:I.mutasi.ireq_user,"onUpdate:modelValue":t[3]||(t[3]=function(e){return I.mutasi.ireq_user=e}),placeholder:"Enter User",class:(0,i.normalizeClass)({"p-invalid":I.errors.ireq_user})},null,8,["modelValue","class"]),I.error.ireq_user?((0,i.openBlock)(),(0,i.createElementBlock)("small",N,(0,i.toDisplayString)(I.error.ireq_user),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",b,[k,(0,i.createElementVNode)("div",E,[(0,i.createVNode)(L,{modelValue:I.mutasi.ireq_divisi_user,"onUpdate:modelValue":t[4]||(t[4]=function(e){return I.mutasi.ireq_divisi_user=e}),options:I.divisi,optionLabel:"name",optionValue:"code",placeholder:"Select One",filter:!0,showClear:!0,class:(0,i.normalizeClass)({"p-invalid":I.errors.ireq_divisi_user})},null,8,["modelValue","options","class"]),I.error.ireq_divisi_user?((0,i.openBlock)(),(0,i.createElementBlock)("small",y,(0,i.toDisplayString)(I.error.ireq_divisi_user),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",g,[x,(0,i.createElementVNode)("div",w,[(0,i.createVNode)(L,{modelValue:I.mutasi.ireq_bu,"onUpdate:modelValue":t[5]||(t[5]=function(e){return I.mutasi.ireq_bu=e}),options:I.bu,optionLabel:"name",optionValue:"code",placeholder:"Select One",showClear:!0,filter:!0,class:(0,i.normalizeClass)({"p-invalid":I.errors.ireq_bu})},null,8,["modelValue","options","class"]),I.errors.ireq_bu?((0,i.openBlock)(),(0,i.createElementBlock)("small",C,(0,i.toDisplayString)(I.errors.ireq_bu[0]),1)):(0,i.createCommentVNode)("",!0),I.error.ireq_bu?((0,i.openBlock)(),(0,i.createElementBlock)("small",B,(0,i.toDisplayString)(I.error.ireq_bu),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",S,[(0,i.createVNode)(M,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Save",type:"submit"}),(0,i.createVNode)(M,{label:"Cancel",class:"p-button-rounded p-button-secondary mt-2",icon:"pi pi-times",onClick:t[6]||(t[6]=function(t){return e.$router.push("/ict-request")})})])],32)])])])}]])}}]);
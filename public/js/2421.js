"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2421],{32421:(e,o,t)=>{t.r(o),t.d(o,{default:()=>x});var r=t(5166),l={class:"card"},a=(0,r.createElementVNode)("h4",null,"Management Role",-1),n={class:"row"},s={class:"col-sm-6"},c={class:"card-body"},i={class:"field grid"},d=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Name",-1),u={class:"col-6"},m={key:0,class:"p-error"},p={class:"field grid"},h=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Deskripsi",-1),V={class:"col-6"},k={key:0,class:"p-error"},v={class:"field grid"},f=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Status",-1),N={class:"col-6"},E={key:0,class:"p-error"},g={class:"card",style:{width:"33rem"}},C={class:"p-fluid"},y={class:"field grid"},b=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Menu",-1),_={class:"col-8"},S={key:0,class:"p-error"},B={class:"form-group"};const w={data:function(){return{error:[],errors:[],role:{rol_name:"",rol_desc:"",rol_stat:"",menu:""},menus:[],stat:[{nama:"Aktif",code:"T"},{nama:"Tidak Aktif",code:"F"}],token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.id?this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(o){e.checkto=o.data.map((function(e){return e.to})),e.checkname=o.data.map((function(e){return e.name})),e.checkname.includes("Role Menu")||e.checkto.includes("/mng-role")?e.getMenu():e.$router.push("/access")})):this.$router.push("/login")},getMenu:function(){var e=this;this.axios.get("api/get-menu",{headers:{Authorization:"Bearer "+this.token}}).then((function(o){e.menus=o.data})).catch((function(o){401==o.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},CreateRole:function(){var e=this;this.errors=[],this.error=[],""!=this.role.menu&&null!=this.role.menu?this.axios.post("api/save-role",this.role,{headers:{Authorization:"Bearer "+this.token}}).then((function(){e.axios.post("api/save-role-menu",e.role,{headers:{Authorization:"Bearer "+e.token}}),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Create"}),setTimeout((function(){return e.$router.push("/mng-role")}),1e3)})).catch((function(o){e.errors=o.response.data.errors})):this.error.menu="Menu Wajib Diisi"}},render:function(e,o,t,w,x,M){var R=(0,r.resolveComponent)("Toast"),z=(0,r.resolveComponent)("Toolbar"),D=(0,r.resolveComponent)("InputText"),A=(0,r.resolveComponent)("Dropdown"),T=(0,r.resolveComponent)("MultiSelect"),$=(0,r.resolveComponent)("Button");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(R),(0,r.createElementVNode)("div",l,[(0,r.createVNode)(z,{class:"mb-4"},{start:(0,r.withCtx)((function(){return[a]})),_:1}),(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("form",{onSubmit:o[5]||(o[5]=(0,r.withModifiers)((function(){return M.CreateRole&&M.CreateRole.apply(M,arguments)}),["prevent"]))},[(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",i,[d,(0,r.createElementVNode)("div",u,[(0,r.createVNode)(D,{modelValue:x.role.rol_name,"onUpdate:modelValue":o[0]||(o[0]=function(e){return x.role.rol_name=e}),placeholder:"Masukan Role Name",class:(0,r.normalizeClass)({"p-invalid":x.errors.rol_name})},null,8,["modelValue","class"]),x.errors.rol_name?((0,r.openBlock)(),(0,r.createElementBlock)("small",m,(0,r.toDisplayString)(x.errors.rol_name[0]),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",p,[h,(0,r.createElementVNode)("div",V,[(0,r.createVNode)(D,{modelValue:x.role.rol_desc,"onUpdate:modelValue":o[1]||(o[1]=function(e){return x.role.rol_desc=e}),placeholder:"Masukan Role Deskripsi",class:(0,r.normalizeClass)({"p-invalid":x.errors.rol_desc})},null,8,["modelValue","class"]),x.errors.rol_desc?((0,r.openBlock)(),(0,r.createElementBlock)("small",k,(0,r.toDisplayString)(x.errors.rol_desc[0]),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",v,[f,(0,r.createElementVNode)("div",N,[(0,r.createVNode)(A,{modelValue:x.role.rol_stat,"onUpdate:modelValue":o[2]||(o[2]=function(e){return x.role.rol_stat=e}),options:x.stat,showClear:!0,optionLabel:"nama",optionValue:"code",placeholder:"Select A Status",class:(0,r.normalizeClass)({"p-invalid":x.errors.rol_stat})},null,8,["modelValue","options","class"]),x.errors.rol_stat?((0,r.openBlock)(),(0,r.createElementBlock)("small",E,(0,r.toDisplayString)(x.errors.rol_stat[0]),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("div",y,[b,(0,r.createElementVNode)("div",_,[(0,r.createVNode)(T,{modelValue:x.role.menu,"onUpdate:modelValue":o[3]||(o[3]=function(e){return x.role.menu=e}),options:x.menus,optionValue:"code",optionLabel:"name",class:(0,r.normalizeClass)({"p-invalid":x.error.menu}),placeholder:"Select Menu",display:"chip"},null,8,["modelValue","options","class"]),x.error.menu?((0,r.openBlock)(),(0,r.createElementBlock)("small",S,(0,r.toDisplayString)(x.error.menu),1)):(0,r.createCommentVNode)("",!0)])])])])]),(0,r.createElementVNode)("div",B,[(0,r.createVNode)($,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,r.createVNode)($,{label:"Cancel",class:"p-button-rounded p-button-secondary mr-2",icon:"pi pi-times",onClick:o[4]||(o[4]=function(o){return e.$router.push("/mng-role")})})])],32)])])])])}},x=w}}]);
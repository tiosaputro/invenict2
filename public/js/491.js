"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[491],{70491:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$});var r=o(70821),a={class:"col-16"},l={class:"card"},n=(0,r.createElementVNode)("h4",null,"Management Role",-1),s={class:"row"},c={class:"col-sm-6"},i={class:"card-body"},d={class:"field grid"},u=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role ID",-1),m={class:"col-3 md-6"},p={class:"field grid"},h=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Name",-1),V={class:"col-6"},k={key:0,class:"p-error"},f={class:"field grid"},N=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Deskripsi",-1),v={class:"col-6"},g={key:0,class:"p-error"},E={class:"field grid"},y=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Role Status",-1),b={class:"col-6"},C={key:0,class:"p-error"},S={class:"card",style:{width:"33rem"}},_={class:"p-fluid"},B={class:"field grid"},x=(0,r.createElementVNode)("label",{style:{width:"120px"}},"Menu",-1),w={class:"col-8"},M={key:0,class:"p-error"},R={class:"form-group"};const U={data:function(){return{errors:[],role:[],menus:[],menuss:{menu:null},stat:[{nama:"Aktif",code:"T"},{nama:"Tidak Aktif",code:"F"}],token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id")}},created:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.id?this.axios.get("/api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("Role Menu")||e.checkto.includes("/mng-role")?(e.getRole(),e.getMenus(),e.getMenu()):e.$router.push("/access")})):this.$router.push("/login")},getMenus:function(){var e=this;this.axios.get("/api/get-menu",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.menus=t.data}))},getRole:function(){var e=this;this.axios.get("/api/edit-role/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.role=t.data})).catch((function(t){401==t.response.status&&(e.$toast.add({severity:"error",summary:"Error",detail:"Sesi Login Expired"}),localStorage.clear(),localStorage.setItem("Expired","true"),setTimeout((function(){return e.$router.push("/login")}),2e3))}))},getMenu:function(){var e=this;this.axios.get("/api/edit-role-menu/"+this.$route.params.code,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.menuss.menu=t.data}))},UpdateRole:function(){var e=this;this.errors=[],this.axios.put("/api/update-role/"+this.$route.params.code,this.role,{headers:{Authorization:"Bearer "+this.token}}).then((function(){e.axios.put("/api/update-role-menu/"+e.$route.params.code,e.menuss,{headers:{Authorization:"Bearer "+e.token}}),e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Update"}),setTimeout((function(){return e.$router.push("/mng-role")}),1e3)})).catch((function(t){e.errors=t.response.data.errors}))}},render:function(e,t,o,U,$,z){var A=(0,r.resolveComponent)("Toast"),D=(0,r.resolveComponent)("Toolbar"),T=(0,r.resolveComponent)("InputText"),I=(0,r.resolveComponent)("Dropdown"),L=(0,r.resolveComponent)("MultiSelect"),F=(0,r.resolveComponent)("Button");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",a,[(0,r.createVNode)(A),(0,r.createElementVNode)("div",l,[(0,r.createVNode)(D,{class:"mb-4"},{start:(0,r.withCtx)((function(){return[n]})),_:1}),(0,r.createElementVNode)("form",{onSubmit:t[6]||(t[6]=(0,r.withModifiers)((function(){return z.UpdateRole&&z.UpdateRole.apply(z,arguments)}),["prevent"]))},[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("div",d,[u,(0,r.createElementVNode)("div",m,[(0,r.createVNode)(T,{modelValue:$.role.rol_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return $.role.rol_id=e}),disabled:""},null,8,["modelValue"])])]),(0,r.createElementVNode)("div",p,[h,(0,r.createElementVNode)("div",V,[(0,r.createVNode)(T,{modelValue:$.role.rol_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return $.role.rol_name=e}),placeholder:"Masukan Role Name",class:(0,r.normalizeClass)({"p-invalid":$.errors.rol_name}),autofocus:""},null,8,["modelValue","class"]),$.errors.rol_name?((0,r.openBlock)(),(0,r.createElementBlock)("small",k,(0,r.toDisplayString)($.errors.rol_name[0]),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",f,[N,(0,r.createElementVNode)("div",v,[(0,r.createVNode)(T,{modelValue:$.role.rol_desc,"onUpdate:modelValue":t[2]||(t[2]=function(e){return $.role.rol_desc=e}),placeholder:"Masukan Role Deskripsi",class:(0,r.normalizeClass)({"p-invalid":$.errors.rol_desc})},null,8,["modelValue","class"]),$.errors.rol_desc?((0,r.openBlock)(),(0,r.createElementBlock)("small",g,(0,r.toDisplayString)($.errors.rol_desc[0]),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",E,[y,(0,r.createElementVNode)("div",b,[(0,r.createVNode)(I,{modelValue:$.role.rol_stat,"onUpdate:modelValue":t[3]||(t[3]=function(e){return $.role.rol_stat=e}),options:$.stat,showClear:!0,optionLabel:"nama",optionValue:"code",placeholder:"Select A Status",class:(0,r.normalizeClass)({"p-invalid":$.errors.rol_stat})},null,8,["modelValue","options","class"]),$.errors.rol_stat?((0,r.openBlock)(),(0,r.createElementBlock)("small",C,(0,r.toDisplayString)($.errors.rol_stat[0]),1)):(0,r.createCommentVNode)("",!0)])])])])]),(0,r.createElementVNode)("div",S,[(0,r.createElementVNode)("div",_,[(0,r.createElementVNode)("div",B,[x,(0,r.createElementVNode)("div",w,[(0,r.createVNode)(L,{modelValue:$.menuss.menu,"onUpdate:modelValue":t[4]||(t[4]=function(e){return $.menuss.menu=e}),options:$.menus,optionValue:"code",optionLabel:"name",display:"chip",filter:!0,placeholder:"Select Menu",class:(0,r.normalizeClass)({"p-invalid":$.errors.menu})},null,8,["modelValue","options","class"]),$.errors.menu?((0,r.openBlock)(),(0,r.createElementBlock)("small",M,(0,r.toDisplayString)($.errors.menu[0]),1)):(0,r.createCommentVNode)("",!0)])])])]),(0,r.createElementVNode)("div",R,[(0,r.createVNode)(F,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,r.createVNode)(F,{label:"Cancel",class:"p-button-rounded p-button-secondary mr-2",icon:"pi pi-times",onClick:t[5]||(t[5]=function(t){return e.$router.push("/mng-role")})})])],32)])])])}},$=U}}]);
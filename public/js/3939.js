"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3939],{38524:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var s=i(70821),r={class:"card"},o=(0,s.createElementVNode)("h4",null,"ICT Request",-1),n={class:"card-body"},l=(0,s.createElementVNode)("div",{class:"field grid"},[(0,s.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"No. Request")],-1),a={class:"field grid"},c=(0,s.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Tgl. Request",-1),d={class:"col-10 md:col-3"},u={class:"flex items-center"},p=["value","onClick"],m={key:0,class:"p-error"},h={class:"field grid"},v=(0,s.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Tipe Request",-1),g={class:"field col-12 md:col-4"},f={key:0,class:"p-error"},k={class:"field grid"},V=(0,s.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Divisi Pengguna",-1),b={class:"field col-12 md:col-4"},N={key:0,class:"p-error"},y={class:"field grid"},B=(0,s.createElementVNode)("label",{class:"col-fixed w-9rem",style:{width:"120px"}},"Bisnis Unit",-1),C={class:"field col-12 md:col-4"},E={class:"form-group"};const _={data:function(){return{errors:[],error:[],tgl:new Date,tipereq:null,usr_name:null,usr_divisi:null,divisi:[],bisnis:null,type:[],bu:[],mask:{input:"DD MMM YYYY"},token:localStorage.getItem("token"),checkname:[],checkto:[],id:localStorage.getItem("id"),code:null,user:[]}},mounted:function(){this.cekUser()},methods:{cekUser:function(){var e=this;this.id?this.axios.get("api/cek-user/"+this.id,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.checkto=t.data.map((function(e){return e.to})),e.checkname=t.data.map((function(e){return e.name})),e.checkname.includes("Request")||e.checkto.includes("/ict-request")?(e.getBisnis(),e.getDivisi(),e.getUser(),e.getType()):e.$router.push("/access")})):this.$router.push("/login")},getUser:function(){var e=this;this.axios.get("api/user",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.user=t.data,e.usr_name=e.user.usr_name,e.bisnis=e.user.usr_bu,e.usr_divisi=e.user.div_id}))},getDivisi:function(){var e=this;this.axios.get("api/get-divisi",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.divisi=t.data}))},getBisnis:function(){var e=this;this.axios.get("api/get-bisnis",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.bu=t.data}))},getType:function(){var e=this;this.axios.get("api/getType",{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.type=t.data}))},CreateIct:function(){var e=this;if(this.errors=[],this.error=[],null!=this.bisnis&&null!=this.usr_name&&null!=this.usr_divisi){var t=new FormData;t.append("tgl",this.tgl),t.append("tipereq",this.tipereq),t.append("bisnis",this.bisnis),t.append("user_name",this.usr_name),t.append("user_divisi",this.usr_divisi),this.axios.post("api/add-ict",t,{headers:{Authorization:"Bearer "+this.token}}).then((function(t){e.$toast.add({severity:"success",summary:"Success Message",detail:"Success Create"}),e.code=t.data.ireq_id,setTimeout((function(){return e.$router.push({name:"Add Ict Request Detail",params:{code:e.code}})}),1e3)})).catch((function(t){e.errors=t.response.data.errors}))}else null==this.tipereq&&(this.error.tipereq="Tipe Request Belum Diisi"),null==this.bisnis&&(this.error.bisnis="Bisnis Unit Belum Diisi"),null==this.usr_name&&(this.error.usr_name="Pengguna Belum Diisi"),null==this.usr_divisi&&(this.error.usr_divisi="Divisi Pengguna Belum Diisi")}},render:function(e,t,i,_,q,w){var x=(0,s.resolveComponent)("Toast"),D=(0,s.resolveComponent)("Toolbar"),T=(0,s.resolveComponent)("Button"),U=(0,s.resolveComponent)("DatePicker"),R=(0,s.resolveComponent)("Dropdown");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createVNode)(x),(0,s.createElementVNode)("div",r,[(0,s.createVNode)(D,{class:"mb-4"},{start:(0,s.withCtx)((function(){return[o]})),_:1}),(0,s.createElementVNode)("div",n,[(0,s.createElementVNode)("form",{onSubmit:t[6]||(t[6]=(0,s.withModifiers)((function(){return w.CreateIct&&w.CreateIct.apply(w,arguments)}),["prevent"]))},[l,(0,s.createElementVNode)("div",a,[c,(0,s.createElementVNode)("div",d,[(0,s.createVNode)(U,{modelValue:q.tgl,"onUpdate:modelValue":t[1]||(t[1]=function(e){return q.tgl=e}),masks:q.mask},{default:(0,s.withCtx)((function(e){var i=e.inputValue,r=e.togglePopover;return[(0,s.createElementVNode)("div",u,[(0,s.createElementVNode)("input",{class:"bg-white text-gray-900 w-full py-2 px-3 appearance-none border rounded-l focus:outline-none",value:i,onClick:r,placeholder:"Pilih Tgl. Request",readonly:""},null,8,p),q.tgl?((0,s.openBlock)(),(0,s.createBlock)(T,{key:1,icon:"pi pi-trash",class:"p-button-danger",onClick:t[0]||(t[0]=function(e){return q.tgl=""})})):((0,s.openBlock)(),(0,s.createBlock)(T,{key:0,icon:"pi pi-calendar",onClick:r},null,8,["onClick"]))])]})),_:1},8,["modelValue","masks"]),q.errors.tgl?((0,s.openBlock)(),(0,s.createElementBlock)("small",m,(0,s.toDisplayString)(q.errors.tgl[0]),1)):(0,s.createCommentVNode)("",!0)])]),(0,s.createElementVNode)("div",h,[v,(0,s.createElementVNode)("div",g,[(0,s.createVNode)(R,{modelValue:q.tipereq,"onUpdate:modelValue":t[2]||(t[2]=function(e){return q.tipereq=e}),options:q.type,optionLabel:"name",optionValue:"code",placeholder:"Pilih Tipe Request",showClear:!0,class:(0,s.normalizeClass)({"p-invalid":q.error.tipereq})},null,8,["modelValue","options","class"]),q.error.tipereq?((0,s.openBlock)(),(0,s.createElementBlock)("small",f,(0,s.toDisplayString)(q.error.tipereq),1)):(0,s.createCommentVNode)("",!0)])]),(0,s.createElementVNode)("div",k,[V,(0,s.createElementVNode)("div",b,[(0,s.createVNode)(R,{modelValue:q.usr_divisi,"onUpdate:modelValue":t[3]||(t[3]=function(e){return q.usr_divisi=e}),options:q.divisi,optionLabel:"name",optionValue:"code",disabled:""},null,8,["modelValue","options"]),q.error.usr_divisi?((0,s.openBlock)(),(0,s.createElementBlock)("small",N,(0,s.toDisplayString)(q.error.usr_divisi),1)):(0,s.createCommentVNode)("",!0)])]),(0,s.createElementVNode)("div",y,[B,(0,s.createElementVNode)("div",C,[(0,s.createVNode)(R,{modelValue:q.bisnis,"onUpdate:modelValue":t[4]||(t[4]=function(e){return q.bisnis=e}),options:q.bu,optionLabel:"name",optionValue:"code",disabled:""},null,8,["modelValue","options"])])]),(0,s.createElementVNode)("div",E,[(0,s.createVNode)(T,{class:"p-button-rounded p-button-primary mr-2",icon:"pi pi-check",label:"Simpan",type:"submit"}),(0,s.createVNode)(T,{label:"Cancel",class:"p-button-rounded p-button-secondary mr-2",icon:"pi pi-times",onClick:t[5]||(t[5]=function(t){return e.$router.push("/ict-request")})})])],32)])])])}},q=_}}]);